{"ast":null,"code":"var _jsxFileName = \"D:\\\\Proyectos Extra\\\\InfoClass\\\\frontend\\\\src\\\\pages\\\\AssignmentDetail.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport api from '../api/axios';\nimport CreateAssignmentModal from '../components/CreateAssignmentModal';\nimport FileUpload from '../components/FileUpload';\nimport { FileText, Calendar, Clock, User, MessageSquare, CheckCircle, AlertCircle, Edit, Save, Download, File, Paperclip, Eye, X } from 'lucide-react';\nimport { format, isAfter, isBefore } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AssignmentDetail = () => {\n  _s();\n  var _assignment$course, _assignment$course2;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user\n  } = useAuth();\n  const [assignment, setAssignment] = useState(null);\n  const [submission, setSubmission] = useState(null);\n  const [submissions, setSubmissions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showEdit, setShowEdit] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n  const [submissionContent, setSubmissionContent] = useState('');\n  const [feedback, setFeedback] = useState('');\n  const [points, setPoints] = useState('');\n  const [submissionFiles, setSubmissionFiles] = useState([]);\n  const [assignmentFiles, setAssignmentFiles] = useState([]);\n  const [submissionFilesMap, setSubmissionFilesMap] = useState({});\n  const [selectedPdfFile, setSelectedPdfFile] = useState(null);\n  const [showPdfViewer, setShowPdfViewer] = useState(false);\n  const [loadingFiles, setLoadingFiles] = useState(new Set());\n\n  // Formateo seguro de fechas para evitar RangeError por valores inválidos\n  const safeFormatDate = (value, fmt = 'dd MMM yyyy') => {\n    if (!value) return '—';\n    try {\n      var _d$getTime;\n      const d = typeof value === 'string' ? new Date(value) : value;\n      if (isNaN(d === null || d === void 0 ? void 0 : (_d$getTime = d.getTime) === null || _d$getTime === void 0 ? void 0 : _d$getTime.call(d))) return '—';\n      return format(d, fmt, {\n        locale: es\n      });\n    } catch (_) {\n      return '—';\n    }\n  };\n\n  // Acciones del profesor sobre la tarea\n  const handleArchiveToggle = async () => {\n    if (!assignment) return;\n    try {\n      const next = !assignment.is_archived;\n      await api.put(`/api/assignments/${assignment.id}/archive`, {\n        is_archived: next\n      });\n      toast.success(next ? 'Tarea archivada' : 'Tarea desarchivada');\n      // Refrescar datos\n      fetchAssignmentData();\n    } catch (error) {\n      var _error$response, _error$response$data;\n      const msg = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Error al actualizar archivo';\n      toast.error(msg);\n    }\n  };\n  const handleDelete = async () => {\n    if (!assignment) return;\n    const confirm = window.confirm('¿Eliminar esta tarea? Esta acción no se puede deshacer.');\n    if (!confirm) return;\n    try {\n      await api.delete(`/api/assignments/${assignment.id}`);\n      toast.success('Tarea eliminada');\n      navigate('/assignments');\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      const msg = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Error al eliminar tarea';\n      toast.error(msg);\n    }\n  };\n  useEffect(() => {\n    fetchAssignmentData();\n  }, [id]);\n\n  // Cargar archivos de todas las entregas cuando cambien las entregas\n  useEffect(() => {\n    if (submissions.length > 0) {\n      submissions.forEach(submission => {\n        if (!submissionFilesMap[submission.id]) {\n          fetchSubmissionFilesById(submission.id);\n        }\n      });\n    }\n  }, [submissions]);\n  const fetchAssignmentData = async () => {\n    setError(null);\n    setLoading(true);\n    try {\n      // 1) Obtener la tarea primero\n      const assignmentRes = await api.get(`/api/assignments/${id}`);\n      setAssignment(assignmentRes.data);\n\n      // Cargar archivos de la tarea\n      fetchAssignmentFiles(id);\n\n      // 2) Solo profesores/admin consultan las entregas\n      const isPrivileged = (user === null || user === void 0 ? void 0 : user.role) === 'teacher' || (user === null || user === void 0 ? void 0 : user.role) === 'admin';\n      if (isPrivileged) {\n        const submissionsRes = await api.get(`/api/assignments/${id}/submissions`);\n        setSubmissions(submissionsRes.data);\n      } else {\n        setSubmissions([]);\n      }\n\n      // 3) Cargar mi entrega si soy estudiante\n      if ((user === null || user === void 0 ? void 0 : user.role) === 'student') {\n        try {\n          const mySubRes = await api.get(`/api/assignments/${id}/my-submission`);\n          const mySub = mySubRes.data || null;\n          setSubmission(mySub);\n          if (mySub) {\n            setSubmissionContent(mySub.content || '');\n            // Cargar archivos de la entrega\n            fetchSubmissionFiles(mySub.id);\n          } else {\n            setSubmissionContent('');\n            setSubmissionFiles([]);\n          }\n        } catch (e) {\n          // Si 404/403, no hay entrega visible; dejar en null\n          setSubmission(null);\n          setSubmissionContent('');\n        }\n      }\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data;\n      const backendMsg = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.msg);\n      setError(backendMsg || 'No se pudo cargar la tarea');\n      if (backendMsg) {\n        toast.error(backendMsg);\n      }\n      console.error('Error al cargar datos de la tarea:', err);\n      setAssignment(null);\n      setSubmission(null);\n      setSubmissions([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setSubmitting(true);\n    try {\n      var _response$data;\n      const response = await api.post(`/api/assignments/${id}/submissions`, {\n        content: submissionContent\n      });\n      setSubmission(response.data);\n      setSubmissionContent(((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.content) || '');\n      toast.success('Entrega enviada exitosamente');\n      setSubmitting(false);\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      const msg = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || 'Error al enviar entrega';\n      toast.error(msg);\n      console.error('Error al enviar entrega:', error);\n      setSubmitting(false);\n    }\n  };\n\n  // Funciones para manejo de archivos\n  const fetchSubmissionFiles = async submissionId => {\n    try {\n      const response = await api.get(`/api/submissions/${submissionId}/files`);\n      setSubmissionFiles(response.data);\n    } catch (error) {\n      console.error('Error al cargar archivos:', error);\n    }\n  };\n\n  // Función para cargar archivos de una entrega específica\n  const fetchSubmissionFilesById = async submissionId => {\n    try {\n      const response = await api.get(`/api/submissions/${submissionId}/files`);\n      setSubmissionFilesMap(prev => ({\n        ...prev,\n        [submissionId]: response.data\n      }));\n    } catch (error) {\n      console.error('Error al cargar archivos de la entrega:', error);\n    }\n  };\n\n  // Función para descargar archivos\n  const downloadFile = async (fileId, filename) => {\n    try {\n      console.log('Iniciando descarga del archivo:', fileId, filename);\n      const response = await api.get(`/api/files/${fileId}`, {\n        responseType: 'blob'\n      });\n      console.log('Respuesta recibida:', response);\n\n      // Crear blob y descargar\n      const blob = new Blob([response.data]);\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = filename;\n      link.style.display = 'none';\n      document.body.appendChild(link);\n      link.click();\n\n      // Limpiar\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n      toast.success('Archivo descargado exitosamente');\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      console.error('Error al descargar archivo:', error);\n      const errorMessage = ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || 'Error al descargar el archivo';\n      toast.error(errorMessage);\n    }\n  };\n\n  // Función para abrir visor PDF\n  const openPdfViewer = async file => {\n    try {\n      // Agregar este archivo a la lista de archivos cargando\n      setLoadingFiles(prev => new Set(prev).add(file.id));\n      console.log('Abriendo PDF:', file);\n\n      // Descargar el archivo como blob\n      const response = await api.get(`/api/files/${file.id}`, {\n        responseType: 'blob'\n      });\n      console.log('PDF descargado:', response);\n\n      // Crear blob URL\n      const blob = new Blob([response.data], {\n        type: 'application/pdf'\n      });\n      const pdfUrl = window.URL.createObjectURL(blob);\n      setSelectedPdfFile({\n        ...file,\n        pdfUrl: pdfUrl\n      });\n      setShowPdfViewer(true);\n\n      // Remover este archivo de la lista de archivos cargando\n      setLoadingFiles(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(file.id);\n        return newSet;\n      });\n    } catch (error) {\n      console.error('Error al abrir PDF:', error);\n      toast.error('Error al abrir el archivo PDF');\n\n      // Remover este archivo de la lista de archivos cargando en caso de error\n      setLoadingFiles(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(file.id);\n        return newSet;\n      });\n    }\n  };\n\n  // Función para cerrar visor PDF\n  const closePdfViewer = () => {\n    // Limpiar la URL del blob para evitar memory leaks\n    if (selectedPdfFile !== null && selectedPdfFile !== void 0 && selectedPdfFile.pdfUrl) {\n      window.URL.revokeObjectURL(selectedPdfFile.pdfUrl);\n    }\n    setShowPdfViewer(false);\n    setSelectedPdfFile(null);\n  };\n\n  // Función para verificar si un archivo es PDF\n  const isPdfFile = filename => {\n    return filename.toLowerCase().endsWith('.pdf');\n  };\n  const fetchAssignmentFiles = async assignmentId => {\n    try {\n      const response = await api.get(`/api/assignments/${assignmentId}/files`);\n      setAssignmentFiles(response.data);\n    } catch (error) {\n      console.error('Error al cargar archivos de la tarea:', error);\n    }\n  };\n  const handleFileUploaded = files => {\n    setSubmissionFiles(prev => [...prev, ...files]);\n  };\n  const handleFileDeleted = fileId => {\n    setSubmissionFiles(prev => prev.filter(file => file.id !== fileId));\n  };\n  const handleGrade = async submissionId => {\n    try {\n      await api.post(`/api/submissions/${submissionId}/grade`, {\n        points_earned: points,\n        feedback: feedback\n      });\n\n      // Recargar datos\n      fetchAssignmentData();\n      setPoints('');\n      setFeedback('');\n      toast.success('Calificación guardada');\n    } catch (error) {\n      var _error$response5, _error$response5$data;\n      const msg = ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.message) || 'Error al calificar';\n      toast.error(msg);\n      console.error('Error al calificar:', error);\n    }\n  };\n  const getAssignmentStatus = () => {\n    if (!assignment) return 'pending';\n    const now = new Date();\n    const dueDate = new Date(assignment.due_date);\n    if (submission && submission.status === 'submitted') {\n      return 'submitted';\n    }\n    if (now > dueDate) {\n      return 'overdue';\n    }\n    if (dueDate - now < 24 * 60 * 60 * 1000) {\n      return 'due-soon';\n    }\n    return 'pending';\n  };\n  const getStatusColor = status => {\n    switch (status) {\n      case 'submitted':\n        return 'text-green-600 bg-green-100';\n      case 'overdue':\n        return 'text-red-600 bg-red-100';\n      case 'due-soon':\n        return 'text-yellow-600 bg-yellow-100';\n      default:\n        return 'text-secondary-600 bg-secondary-100';\n    }\n  };\n  const getStatusIcon = status => {\n    switch (status) {\n      case 'submitted':\n        return /*#__PURE__*/_jsxDEV(CheckCircle, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 16\n        }, this);\n      case 'overdue':\n        return /*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(Clock, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-64\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 7\n    }, this);\n  }\n  if (!assignment) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-12\",\n      children: [/*#__PURE__*/_jsxDEV(FileText, {\n        className: \"w-16 h-16 text-secondary-400 mx-auto mb-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium text-secondary-900 mb-2\",\n        children: error ? 'Error cargando la tarea' : 'Tarea no encontrada'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-secondary-600 mb-4\",\n        children: error || 'La tarea que buscas no existe o no tienes acceso a ella.'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/assignments\",\n        className: \"btn-primary\",\n        children: \"Volver a Tareas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 7\n    }, this);\n  }\n  const status = getAssignmentStatus();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-start justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-start space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(FileText, {\n              className: \"w-6 h-6 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-2xl font-bold text-secondary-900 mb-2\",\n              children: assignment.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-secondary-600 mb-2\",\n              children: ((_assignment$course = assignment.course) === null || _assignment$course === void 0 ? void 0 : _assignment$course.name) || 'Curso no disponible'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-4 text-sm text-secondary-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(Calendar, {\n                  className: \"w-4 h-4 mr-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 422,\n                  columnNumber: 19\n                }, this), safeFormatDate(assignment.due_date)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(Clock, {\n                  className: \"w-4 h-4 mr-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 426,\n                  columnNumber: 19\n                }, this), safeFormatDate(assignment.due_date, 'HH:mm')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm font-medium\",\n                children: [assignment.max_points, \" puntos\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: `inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(status)}`,\n            children: [getStatusIcon(status), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-1 capitalize\",\n              children: status === 'due-soon' ? 'Por vencer' : status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 13\n          }, this), (user === null || user === void 0 ? void 0 : user.role) === 'teacher' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-secondary\",\n              onClick: () => setShowEdit(true),\n              children: [/*#__PURE__*/_jsxDEV(Edit, {\n                className: \"w-4 h-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 19\n              }, this), \"Editar\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-secondary\",\n              onClick: handleArchiveToggle,\n              children: assignment.is_archived ? 'Desarchivar' : 'Archivar'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-secondary\",\n              onClick: handleDelete,\n              children: \"Eliminar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"prose max-w-none\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-secondary-900 mb-2\",\n          children: \"Descripci\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-secondary-700 whitespace-pre-wrap\",\n          children: assignment.description || 'Sin descripción'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 11\n        }, this), assignmentFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-sm font-medium text-blue-800 mb-3 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(FileText, {\n              className: \"w-4 h-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 17\n            }, this), \"Archivos adjuntos de la tarea (\", assignmentFiles.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: assignmentFiles.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between p-3 bg-white rounded border border-blue-100\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center flex-1 min-w-0\",\n                children: [/*#__PURE__*/_jsxDEV(File, {\n                  className: \"w-5 h-5 mr-3 text-blue-600 flex-shrink-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 481,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"min-w-0 flex-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm font-medium text-blue-800 truncate\",\n                    children: file.original_filename || file.filename\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 483,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-blue-600\",\n                    children: [(file.file_size / 1024).toFixed(1), \" KB\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 486,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2 ml-3\",\n                children: [isPdfFile(file.original_filename || file.filename) && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => openPdfViewer(file),\n                  disabled: loadingPdf,\n                  className: \"flex items-center space-x-1 text-blue-600 hover:text-blue-700 text-sm font-medium px-2 py-1 rounded hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed\",\n                  children: [/*#__PURE__*/_jsxDEV(Eye, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 498,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: loadingPdf ? 'Cargando...' : 'Ver'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 499,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 493,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => downloadFile(file.id, file.original_filename || file.filename),\n                  className: \"flex items-center space-x-1 text-blue-600 hover:text-blue-700 text-sm font-medium px-2 py-1 rounded hover:bg-blue-50\",\n                  children: [/*#__PURE__*/_jsxDEV(Download, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 506,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Descargar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 507,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 502,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 21\n              }, this)]\n            }, file.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 7\n    }, this), (user === null || user === void 0 ? void 0 : user.role) === 'student' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold text-secondary-900 mb-4\",\n        children: \"Mi Entrega\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 11\n      }, this), submission ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 bg-secondary-50 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium text-secondary-700\",\n              children: [\"Estado: \", submission.status]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 529,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm text-secondary-600\",\n              children: [\"Enviado: \", safeFormatDate(submission.submitted_at, 'dd MMM yyyy HH:mm')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-secondary-700 whitespace-pre-wrap\",\n            children: submission.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 17\n          }, this), submission.points_earned && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 p-3 bg-green-50 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium text-green-900\",\n                children: [\"Calificaci\\xF3n: \", submission.points_earned, \"/\", assignment.max_points]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 542,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm  text-green-700\",\n                children: [(submission.points_earned / assignment.max_points * 100).toFixed(1), \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 545,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 541,\n              columnNumber: 21\n            }, this), submission.feedback && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-sm text-green-800\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Comentarios:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 551,\n                columnNumber: 25\n              }, this), \" \", submission.feedback]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 15\n        }, this), submission.status === 'draft' && /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-secondary-700 mb-2\",\n              children: \"Actualizar Entrega\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: submissionContent,\n              onChange: e => setSubmissionContent(e.target.value),\n              rows: 6,\n              className: \"input-field\",\n              placeholder: \"Escribe tu respuesta aqu\\xED...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-secondary-700 mb-2\",\n              children: \"Archivos Adjuntos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(FileUpload, {\n              submissionId: submission === null || submission === void 0 ? void 0 : submission.id,\n              onFileUploaded: handleFileUploaded,\n              onFileDeleted: handleFileDeleted,\n              existingFiles: submissionFiles,\n              maxFiles: 5,\n              maxSizeMB: 10\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 578,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-secondary\",\n              children: \"Guardar Borrador\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 589,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: submitting,\n              className: \"btn-primary\",\n              children: submitting ? 'Enviando...' : 'Enviar Entrega'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 588,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-secondary-700 mb-2\",\n            children: \"Tu Entrega\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: submissionContent,\n            onChange: e => setSubmissionContent(e.target.value),\n            rows: 6,\n            className: \"input-field\",\n            placeholder: \"Escribe tu respuesta aqu\\xED...\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 612,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-secondary-700 mb-2\",\n            children: \"Archivos Adjuntos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 624,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(FileUpload, {\n            assignmentId: assignment === null || assignment === void 0 ? void 0 : assignment.id,\n            onFileUploaded: handleFileUploaded,\n            onFileDeleted: handleFileDeleted,\n            existingFiles: submissionFiles,\n            maxFiles: 5,\n            maxSizeMB: 10\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 627,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 623,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-secondary\",\n            children: \"Guardar Borrador\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 638,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: submitting,\n            className: \"btn-primary\",\n            children: submitting ? 'Enviando...' : 'Enviar Entrega'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 644,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 637,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 9\n    }, this), (user === null || user === void 0 ? void 0 : user.role) === 'teacher' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold text-secondary-900 mb-4\",\n        children: [\"Entregas de Estudiantes (\", submissions.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 660,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: submissions.map(sub => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 bg-secondary-50 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(User, {\n                  className: \"w-4 h-4 text-primary-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 670,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 669,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium text-secondary-900\",\n                  children: [sub.student.first_name, \" \", sub.student.last_name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 673,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-secondary-600\",\n                  children: sub.student.email\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 676,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 672,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(sub.status)}`,\n                children: sub.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 682,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 681,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 667,\n            columnNumber: 17\n          }, this), sub.content && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-sm font-medium text-secondary-700 mb-2 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(MessageSquare, {\n                className: \"w-4 h-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 692,\n                columnNumber: 23\n              }, this), \"Respuesta del estudiante:\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 691,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-secondary-700 whitespace-pre-wrap bg-white p-3 rounded border\",\n              children: sub.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 695,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 690,\n            columnNumber: 19\n          }, this), submissionFilesMap[sub.id] && submissionFilesMap[sub.id].length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-sm font-medium text-secondary-700 mb-2 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Paperclip, {\n                className: \"w-4 h-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 705,\n                columnNumber: 23\n              }, this), \"Archivos adjuntos (\", submissionFilesMap[sub.id].length, \"):\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 704,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: submissionFilesMap[sub.id].map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between bg-white p-3 rounded border\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-3\",\n                  children: [/*#__PURE__*/_jsxDEV(File, {\n                    className: \"w-5 h-5 text-secondary-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 712,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm font-medium text-secondary-900\",\n                      children: file.original_filename\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 714,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-secondary-500\",\n                      children: [(file.file_size / 1024).toFixed(1), \" KB\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 717,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 713,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 711,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => downloadFile(file.id, file.original_filename),\n                  className: \"flex items-center space-x-1 text-primary-600 hover:text-primary-700 text-sm font-medium\",\n                  children: [/*#__PURE__*/_jsxDEV(Download, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 726,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Descargar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 727,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 722,\n                  columnNumber: 27\n                }, this)]\n              }, file.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 710,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 708,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 703,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between text-sm text-secondary-600\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Enviado: \", safeFormatDate(sub.submitted_at, 'dd MMM yyyy HH:mm')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 736,\n              columnNumber: 19\n            }, this), sub.points_earned ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-medium text-green-600\",\n              children: [sub.points_earned, \"/\", assignment.max_points, \" puntos\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 740,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-secondary-500\",\n              children: \"Sin calificar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 744,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 735,\n            columnNumber: 17\n          }, this), !sub.points_earned && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 pt-3 border-t border-secondary-200\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                placeholder: \"Puntos\",\n                value: points,\n                onChange: e => setPoints(e.target.value),\n                className: \"input-field w-16 text-center px-1 py-1\",\n                min: \"0\",\n                max: assignment.max_points,\n                style: {\n                  minWidth: '4.5rem',\n                  maxWidth: '5.5rem',\n                  height: '4rem'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 751,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 flex\",\n                children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                  placeholder: \"Feedback (opcional)\",\n                  value: feedback,\n                  onChange: e => setFeedback(e.target.value),\n                  className: \"input-field flex-1 min-h-[3rem] resize-y\",\n                  rows: 2\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 762,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleGrade(sub.id),\n                  className: \"btn-primary whitespace-nowrap ml-3 self-end\",\n                  children: [/*#__PURE__*/_jsxDEV(Save, {\n                    className: \"w-4 h-4 mr-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 773,\n                    columnNumber: 27\n                  }, this), \"Calificar\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 769,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 761,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 750,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 749,\n            columnNumber: 19\n          }, this), sub.feedback && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 p-3 bg-blue-50 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-blue-800\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Comentarios:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 784,\n                columnNumber: 23\n              }, this), \" \", sub.feedback]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 783,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 782,\n            columnNumber: 19\n          }, this)]\n        }, sub.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 666,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 664,\n        columnNumber: 11\n      }, this), submissions.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8\",\n        children: [/*#__PURE__*/_jsxDEV(FileText, {\n          className: \"w-12 h-12 text-secondary-400 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 794,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-secondary-600\",\n          children: \"No hay entregas a\\xFAn\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 795,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 793,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 659,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold text-secondary-900 mb-4\",\n        children: \"Comentarios\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 803,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center\",\n            children: /*#__PURE__*/_jsxDEV(User, {\n              className: \"w-4 h-4 text-primary-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 809,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 808,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              placeholder: \"Agregar un comentario...\",\n              rows: 3,\n              className: \"input-field\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 812,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-end mt-2\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-primary\",\n                children: [/*#__PURE__*/_jsxDEV(MessageSquare, {\n                  className: \"w-4 h-4 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 819,\n                  columnNumber: 19\n                }, this), \"Comentar\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 818,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 817,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 811,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 807,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 806,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 802,\n      columnNumber: 7\n    }, this), (user === null || user === void 0 ? void 0 : user.role) === 'teacher' && assignment && /*#__PURE__*/_jsxDEV(CreateAssignmentModal, {\n      isOpen: showEdit,\n      onClose: () => setShowEdit(false),\n      courseId: (_assignment$course2 = assignment.course) === null || _assignment$course2 === void 0 ? void 0 : _assignment$course2.id,\n      assignment: {\n        id: assignment.id,\n        title: assignment.title,\n        description: assignment.description,\n        due_date: assignment.due_date,\n        max_points: assignment.max_points,\n        allow_late_submissions: assignment.allow_late_submissions\n      },\n      onAssignmentUpdated: () => {\n        setShowEdit(false);\n        fetchAssignmentData();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 830,\n      columnNumber: 9\n    }, this), showPdfViewer && selectedPdfFile && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-xl w-full h-full max-w-6xl max-h-[90vh] flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between p-4 border-b\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-secondary-900 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(FileText, {\n              className: \"w-5 h-5 mr-2 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 856,\n              columnNumber: 17\n            }, this), selectedPdfFile.original_filename || selectedPdfFile.filename]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 855,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => downloadFile(selectedPdfFile.id, selectedPdfFile.original_filename || selectedPdfFile.filename),\n              className: \"flex items-center space-x-1 text-blue-600 hover:text-blue-700 px-3 py-1 rounded hover:bg-blue-50\",\n              children: [/*#__PURE__*/_jsxDEV(Download, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 864,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Descargar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 865,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 860,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: closePdfViewer,\n              className: \"p-2 text-secondary-500 hover:text-secondary-700 rounded hover:bg-secondary-100\",\n              children: /*#__PURE__*/_jsxDEV(X, {\n                className: \"w-5 h-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 871,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 867,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 859,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 854,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 p-4\",\n          children: loadingPdf ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center h-full\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 881,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-secondary-600\",\n                children: \"Cargando PDF...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 882,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 880,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 879,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"iframe\", {\n            src: selectedPdfFile.pdfUrl,\n            className: \"w-full h-full border-0 rounded\",\n            title: selectedPdfFile.original_filename || selectedPdfFile.filename,\n            onError: () => {\n              console.error('Error al cargar PDF en iframe');\n              toast.error('Error al cargar el PDF. Intenta descargarlo directamente.');\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 886,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 877,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 852,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 851,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 405,\n    columnNumber: 5\n  }, this);\n};\n_s(AssignmentDetail, \"8MxggTAb51YKXF22BAcxoXti0f8=\", false, function () {\n  return [useParams, useNavigate, useAuth];\n});\n_c = AssignmentDetail;\nexport default AssignmentDetail;\nvar _c;\n$RefreshReg$(_c, \"AssignmentDetail\");","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useNavigate","useAuth","api","CreateAssignmentModal","FileUpload","FileText","Calendar","Clock","User","MessageSquare","CheckCircle","AlertCircle","Edit","Save","Download","File","Paperclip","Eye","X","format","isAfter","isBefore","es","toast","jsxDEV","_jsxDEV","AssignmentDetail","_s","_assignment$course","_assignment$course2","id","navigate","user","assignment","setAssignment","submission","setSubmission","submissions","setSubmissions","loading","setLoading","error","setError","showEdit","setShowEdit","submitting","setSubmitting","submissionContent","setSubmissionContent","feedback","setFeedback","points","setPoints","submissionFiles","setSubmissionFiles","assignmentFiles","setAssignmentFiles","submissionFilesMap","setSubmissionFilesMap","selectedPdfFile","setSelectedPdfFile","showPdfViewer","setShowPdfViewer","loadingFiles","setLoadingFiles","Set","safeFormatDate","value","fmt","_d$getTime","d","Date","isNaN","getTime","call","locale","_","handleArchiveToggle","next","is_archived","put","success","fetchAssignmentData","_error$response","_error$response$data","msg","response","data","message","handleDelete","confirm","window","delete","_error$response2","_error$response2$data","length","forEach","fetchSubmissionFilesById","assignmentRes","get","fetchAssignmentFiles","isPrivileged","role","submissionsRes","mySubRes","mySub","content","fetchSubmissionFiles","e","err","_err$response","_err$response$data","_err$response2","_err$response2$data","backendMsg","console","handleSubmit","preventDefault","_response$data","post","_error$response3","_error$response3$data","submissionId","prev","downloadFile","fileId","filename","log","responseType","blob","Blob","url","URL","createObjectURL","link","document","createElement","href","download","style","display","body","appendChild","click","removeChild","revokeObjectURL","_error$response4","_error$response4$data","errorMessage","openPdfViewer","file","add","type","pdfUrl","newSet","closePdfViewer","isPdfFile","toLowerCase","endsWith","assignmentId","handleFileUploaded","files","handleFileDeleted","filter","handleGrade","points_earned","_error$response5","_error$response5$data","getAssignmentStatus","now","dueDate","due_date","status","getStatusColor","getStatusIcon","className","fileName","_jsxFileName","lineNumber","columnNumber","children","to","title","course","name","max_points","onClick","description","map","original_filename","file_size","toFixed","disabled","loadingPdf","submitted_at","onSubmit","onChange","target","rows","placeholder","onFileUploaded","onFileDeleted","existingFiles","maxFiles","maxSizeMB","required","sub","student","first_name","last_name","email","min","max","minWidth","maxWidth","height","isOpen","onClose","courseId","allow_late_submissions","onAssignmentUpdated","src","onError","_c","$RefreshReg$"],"sources":["D:/Proyectos Extra/InfoClass/frontend/src/pages/AssignmentDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport api from '../api/axios';\r\nimport CreateAssignmentModal from '../components/CreateAssignmentModal';\r\nimport FileUpload from '../components/FileUpload';\r\nimport {\r\n  FileText,\r\n  Calendar,\r\n  Clock,\r\n  User,\r\n  MessageSquare,\r\n  CheckCircle,\r\n  AlertCircle,\r\n  Edit,\r\n  Save,\r\n  Download,\r\n  File,\r\n  Paperclip,\r\n  Eye,\r\n  X\r\n} from 'lucide-react';\r\nimport { format, isAfter, isBefore } from 'date-fns';\r\nimport { es } from 'date-fns/locale';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst AssignmentDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user } = useAuth();\r\n  const [assignment, setAssignment] = useState(null);\r\n  const [submission, setSubmission] = useState(null);\r\n  const [submissions, setSubmissions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [showEdit, setShowEdit] = useState(false);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [submissionContent, setSubmissionContent] = useState('');\r\n  const [feedback, setFeedback] = useState('');\r\n  const [points, setPoints] = useState('');\r\n  const [submissionFiles, setSubmissionFiles] = useState([]);\r\n  const [assignmentFiles, setAssignmentFiles] = useState([]);\r\n  const [submissionFilesMap, setSubmissionFilesMap] = useState({});\r\n  const [selectedPdfFile, setSelectedPdfFile] = useState(null);\r\n  const [showPdfViewer, setShowPdfViewer] = useState(false);\r\n  const [loadingFiles, setLoadingFiles] = useState(new Set());\r\n\r\n  // Formateo seguro de fechas para evitar RangeError por valores inválidos\r\n  const safeFormatDate = (value, fmt = 'dd MMM yyyy') => {\r\n    if (!value) return '—';\r\n    try {\r\n      const d = typeof value === 'string' ? new Date(value) : value;\r\n      if (isNaN(d?.getTime?.())) return '—';\r\n      return format(d, fmt, { locale: es });\r\n    } catch (_) {\r\n      return '—';\r\n    }\r\n  };\r\n\r\n  // Acciones del profesor sobre la tarea\r\n  const handleArchiveToggle = async () => {\r\n    if (!assignment) return;\r\n    try {\r\n      const next = !assignment.is_archived;\r\n      await api.put(`/api/assignments/${assignment.id}/archive`, { is_archived: next });\r\n      toast.success(next ? 'Tarea archivada' : 'Tarea desarchivada');\r\n      // Refrescar datos\r\n      fetchAssignmentData();\r\n    } catch (error) {\r\n      const msg = error.response?.data?.message || 'Error al actualizar archivo';\r\n      toast.error(msg);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!assignment) return;\r\n    const confirm = window.confirm('¿Eliminar esta tarea? Esta acción no se puede deshacer.');\r\n    if (!confirm) return;\r\n    try {\r\n      await api.delete(`/api/assignments/${assignment.id}`);\r\n      toast.success('Tarea eliminada');\r\n      navigate('/assignments');\r\n    } catch (error) {\r\n      const msg = error.response?.data?.message || 'Error al eliminar tarea';\r\n      toast.error(msg);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchAssignmentData();\r\n  }, [id]);\r\n\r\n  // Cargar archivos de todas las entregas cuando cambien las entregas\r\n  useEffect(() => {\r\n    if (submissions.length > 0) {\r\n      submissions.forEach(submission => {\r\n        if (!submissionFilesMap[submission.id]) {\r\n          fetchSubmissionFilesById(submission.id);\r\n        }\r\n      });\r\n    }\r\n  }, [submissions]);\r\n\r\n  const fetchAssignmentData = async () => {\r\n    setError(null);\r\n    setLoading(true);\r\n    try {\r\n      // 1) Obtener la tarea primero\r\n      const assignmentRes = await api.get(`/api/assignments/${id}`);\r\n      setAssignment(assignmentRes.data);\r\n      \r\n      // Cargar archivos de la tarea\r\n      fetchAssignmentFiles(id);\r\n\r\n      // 2) Solo profesores/admin consultan las entregas\r\n      const isPrivileged = user?.role === 'teacher' || user?.role === 'admin';\r\n      if (isPrivileged) {\r\n        const submissionsRes = await api.get(`/api/assignments/${id}/submissions`);\r\n        setSubmissions(submissionsRes.data);\r\n      } else {\r\n        setSubmissions([]);\r\n      }\r\n\r\n      // 3) Cargar mi entrega si soy estudiante\r\n      if (user?.role === 'student') {\r\n        try {\r\n          const mySubRes = await api.get(`/api/assignments/${id}/my-submission`);\r\n          const mySub = mySubRes.data || null;\r\n          setSubmission(mySub);\r\n          if (mySub) {\r\n            setSubmissionContent(mySub.content || '');\r\n            // Cargar archivos de la entrega\r\n            fetchSubmissionFiles(mySub.id);\r\n          } else {\r\n            setSubmissionContent('');\r\n            setSubmissionFiles([]);\r\n          }\r\n        } catch (e) {\r\n          // Si 404/403, no hay entrega visible; dejar en null\r\n          setSubmission(null);\r\n          setSubmissionContent('');\r\n        }\r\n      }\r\n    } catch (err) {\r\n      const backendMsg = err.response?.data?.message || err.response?.data?.msg;\r\n      setError(backendMsg || 'No se pudo cargar la tarea');\r\n      if (backendMsg) {\r\n        toast.error(backendMsg);\r\n      }\r\n      console.error('Error al cargar datos de la tarea:', err);\r\n      setAssignment(null);\r\n      setSubmission(null);\r\n      setSubmissions([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setSubmitting(true);\r\n\r\n    try {\r\n      const response = await api.post(`/api/assignments/${id}/submissions`, {\r\n        content: submissionContent\r\n      });\r\n\r\n      setSubmission(response.data);\r\n      setSubmissionContent(response.data?.content || '');\r\n      toast.success('Entrega enviada exitosamente');\r\n      setSubmitting(false);\r\n    } catch (error) {\r\n      const msg = error.response?.data?.message || 'Error al enviar entrega';\r\n      toast.error(msg);\r\n      console.error('Error al enviar entrega:', error);\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Funciones para manejo de archivos\r\n  const fetchSubmissionFiles = async (submissionId) => {\r\n    try {\r\n      const response = await api.get(`/api/submissions/${submissionId}/files`);\r\n      setSubmissionFiles(response.data);\r\n    } catch (error) {\r\n      console.error('Error al cargar archivos:', error);\r\n    }\r\n  };\r\n\r\n  // Función para cargar archivos de una entrega específica\r\n  const fetchSubmissionFilesById = async (submissionId) => {\r\n    try {\r\n      const response = await api.get(`/api/submissions/${submissionId}/files`);\r\n      setSubmissionFilesMap(prev => ({\r\n        ...prev,\r\n        [submissionId]: response.data\r\n      }));\r\n    } catch (error) {\r\n      console.error('Error al cargar archivos de la entrega:', error);\r\n    }\r\n  };\r\n\r\n  // Función para descargar archivos\r\n  const downloadFile = async (fileId, filename) => {\r\n    try {\r\n      console.log('Iniciando descarga del archivo:', fileId, filename);\r\n      \r\n      const response = await api.get(`/api/files/${fileId}`, {\r\n        responseType: 'blob'\r\n      });\r\n      \r\n      console.log('Respuesta recibida:', response);\r\n      \r\n      // Crear blob y descargar\r\n      const blob = new Blob([response.data]);\r\n      const url = window.URL.createObjectURL(blob);\r\n      \r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = filename;\r\n      link.style.display = 'none';\r\n      \r\n      document.body.appendChild(link);\r\n      link.click();\r\n      \r\n      // Limpiar\r\n      document.body.removeChild(link);\r\n      window.URL.revokeObjectURL(url);\r\n      \r\n      toast.success('Archivo descargado exitosamente');\r\n    } catch (error) {\r\n      console.error('Error al descargar archivo:', error);\r\n      const errorMessage = error.response?.data?.message || 'Error al descargar el archivo';\r\n      toast.error(errorMessage);\r\n    }\r\n  };\r\n\r\n  // Función para abrir visor PDF\r\n  const openPdfViewer = async (file) => {\r\n    try {\r\n      // Agregar este archivo a la lista de archivos cargando\r\n      setLoadingFiles(prev => new Set(prev).add(file.id));\r\n      console.log('Abriendo PDF:', file);\r\n      \r\n      // Descargar el archivo como blob\r\n      const response = await api.get(`/api/files/${file.id}`, {\r\n        responseType: 'blob'\r\n      });\r\n      \r\n      console.log('PDF descargado:', response);\r\n      \r\n      // Crear blob URL\r\n      const blob = new Blob([response.data], { type: 'application/pdf' });\r\n      const pdfUrl = window.URL.createObjectURL(blob);\r\n      \r\n      setSelectedPdfFile({\r\n        ...file,\r\n        pdfUrl: pdfUrl\r\n      });\r\n      setShowPdfViewer(true);\r\n      \r\n      // Remover este archivo de la lista de archivos cargando\r\n      setLoadingFiles(prev => {\r\n        const newSet = new Set(prev);\r\n        newSet.delete(file.id);\r\n        return newSet;\r\n      });\r\n    } catch (error) {\r\n      console.error('Error al abrir PDF:', error);\r\n      toast.error('Error al abrir el archivo PDF');\r\n      \r\n      // Remover este archivo de la lista de archivos cargando en caso de error\r\n      setLoadingFiles(prev => {\r\n        const newSet = new Set(prev);\r\n        newSet.delete(file.id);\r\n        return newSet;\r\n      });\r\n    }\r\n  };\r\n\r\n  // Función para cerrar visor PDF\r\n  const closePdfViewer = () => {\r\n    // Limpiar la URL del blob para evitar memory leaks\r\n    if (selectedPdfFile?.pdfUrl) {\r\n      window.URL.revokeObjectURL(selectedPdfFile.pdfUrl);\r\n    }\r\n    setShowPdfViewer(false);\r\n    setSelectedPdfFile(null);\r\n  };\r\n\r\n  // Función para verificar si un archivo es PDF\r\n  const isPdfFile = (filename) => {\r\n    return filename.toLowerCase().endsWith('.pdf');\r\n  };\r\n\r\n  const fetchAssignmentFiles = async (assignmentId) => {\r\n    try {\r\n      const response = await api.get(`/api/assignments/${assignmentId}/files`);\r\n      setAssignmentFiles(response.data);\r\n    } catch (error) {\r\n      console.error('Error al cargar archivos de la tarea:', error);\r\n    }\r\n  };\r\n\r\n  const handleFileUploaded = (files) => {\r\n    setSubmissionFiles(prev => [...prev, ...files]);\r\n  };\r\n\r\n  const handleFileDeleted = (fileId) => {\r\n    setSubmissionFiles(prev => prev.filter(file => file.id !== fileId));\r\n  };\r\n\r\n  const handleGrade = async (submissionId) => {\r\n    try {\r\n      await api.post(`/api/submissions/${submissionId}/grade`, {\r\n        points_earned: points,\r\n        feedback: feedback\r\n      });\r\n\r\n      // Recargar datos\r\n      fetchAssignmentData();\r\n      setPoints('');\r\n      setFeedback('');\r\n      toast.success('Calificación guardada');\r\n    } catch (error) {\r\n      const msg = error.response?.data?.message || 'Error al calificar';\r\n      toast.error(msg);\r\n      console.error('Error al calificar:', error);\r\n    }\r\n  };\r\n\r\n  const getAssignmentStatus = () => {\r\n    if (!assignment) return 'pending';\r\n    \r\n    const now = new Date();\r\n    const dueDate = new Date(assignment.due_date);\r\n    \r\n    if (submission && submission.status === 'submitted') {\r\n      return 'submitted';\r\n    }\r\n    \r\n    if (now > dueDate) {\r\n      return 'overdue';\r\n    }\r\n    \r\n    if (dueDate - now < 24 * 60 * 60 * 1000) {\r\n      return 'due-soon';\r\n    }\r\n    \r\n    return 'pending';\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'submitted':\r\n        return 'text-green-600 bg-green-100';\r\n      case 'overdue':\r\n        return 'text-red-600 bg-red-100';\r\n      case 'due-soon':\r\n        return 'text-yellow-600 bg-yellow-100';\r\n      default:\r\n        return 'text-secondary-600 bg-secondary-100';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'submitted':\r\n        return <CheckCircle className=\"w-4 h-4\" />;\r\n      case 'overdue':\r\n        return <AlertCircle className=\"w-4 h-4\" />;\r\n      default:\r\n        return <Clock className=\"w-4 h-4\" />;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!assignment) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <FileText className=\"w-16 h-16 text-secondary-400 mx-auto mb-4\" />\r\n        <h3 className=\"text-lg font-medium text-secondary-900 mb-2\">\r\n          {error ? 'Error cargando la tarea' : 'Tarea no encontrada'}\r\n        </h3>\r\n        <p className=\"text-secondary-600 mb-4\">\r\n          {error || 'La tarea que buscas no existe o no tienes acceso a ella.'}\r\n        </p>\r\n        <Link to=\"/assignments\" className=\"btn-primary\">\r\n          Volver a Tareas\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const status = getAssignmentStatus();\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto space-y-6\">\r\n      {/* Header de la Tarea */}\r\n      <div className=\"card\">\r\n        <div className=\"flex items-start justify-between mb-4\">\r\n          <div className=\"flex items-start space-x-4\">\r\n            <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\r\n              <FileText className=\"w-6 h-6 text-blue-600\" />\r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-secondary-900 mb-2\">\r\n                {assignment.title}\r\n              </h1>\r\n              <p className=\"text-secondary-600 mb-2\">\r\n                {assignment.course?.name || 'Curso no disponible'}\r\n              </p>\r\n              <div className=\"flex items-center space-x-4 text-sm text-secondary-600\">\r\n                <div className=\"flex items-center\">\r\n                  <Calendar className=\"w-4 h-4 mr-1\" />\r\n                  {safeFormatDate(assignment.due_date)}\r\n                </div>\r\n                <div className=\"flex items-center\">\r\n                  <Clock className=\"w-4 h-4 mr-1\" />\r\n                  {safeFormatDate(assignment.due_date, 'HH:mm')}\r\n                </div>\r\n                <div className=\"text-sm font-medium\">\r\n                  {assignment.max_points} puntos\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center space-x-2\">\r\n            <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(status)}`}>\r\n              {getStatusIcon(status)}\r\n              <span className=\"ml-1 capitalize\">\r\n                {status === 'due-soon' ? 'Por vencer' : status}\r\n              </span>\r\n            </span>\r\n\r\n            {user?.role === 'teacher' && (\r\n              <div className=\"flex items-center space-x-2\">\r\n                <button className=\"btn-secondary\" onClick={() => setShowEdit(true)}>\r\n                  <Edit className=\"w-4 h-4 mr-2\" />\r\n                  Editar\r\n                </button>\r\n                <button className=\"btn-secondary\" onClick={handleArchiveToggle}>\r\n                  {assignment.is_archived ? 'Desarchivar' : 'Archivar'}\r\n                </button>\r\n                <button className=\"btn-secondary\" onClick={handleDelete}>\r\n                  Eliminar\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Descripción */}\r\n        <div className=\"prose max-w-none\">\r\n          <h3 className=\"text-lg font-semibold text-secondary-900 mb-2\">\r\n            Descripción\r\n          </h3>\r\n          <div className=\"text-secondary-700 whitespace-pre-wrap\">\r\n            {assignment.description || 'Sin descripción'}\r\n          </div>\r\n          \r\n          {/* Archivos adjuntos de la tarea */}\r\n          {assignmentFiles.length > 0 && (\r\n            <div className=\"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\r\n              <h4 className=\"text-sm font-medium text-blue-800 mb-3 flex items-center\">\r\n                <FileText className=\"w-4 h-4 mr-2\" />\r\n                Archivos adjuntos de la tarea ({assignmentFiles.length})\r\n              </h4>\r\n              <div className=\"space-y-2\">\r\n                {assignmentFiles.map((file) => (\r\n                  <div key={file.id} className=\"flex items-center justify-between p-3 bg-white rounded border border-blue-100\">\r\n                    <div className=\"flex items-center flex-1 min-w-0\">\r\n                      <File className=\"w-5 h-5 mr-3 text-blue-600 flex-shrink-0\" />\r\n                      <div className=\"min-w-0 flex-1\">\r\n                        <p className=\"text-sm font-medium text-blue-800 truncate\">\r\n                          {file.original_filename || file.filename}\r\n                        </p>\r\n                        <p className=\"text-xs text-blue-600\">\r\n                          {(file.file_size / 1024).toFixed(1)} KB\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2 ml-3\">\r\n                      {isPdfFile(file.original_filename || file.filename) && (\r\n                        <button\r\n                          onClick={() => openPdfViewer(file)}\r\n                          disabled={loadingPdf}\r\n                          className=\"flex items-center space-x-1 text-blue-600 hover:text-blue-700 text-sm font-medium px-2 py-1 rounded hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                        >\r\n                          <Eye className=\"w-4 h-4\" />\r\n                          <span>{loadingPdf ? 'Cargando...' : 'Ver'}</span>\r\n                        </button>\r\n                      )}\r\n                      <button\r\n                        onClick={() => downloadFile(file.id, file.original_filename || file.filename)}\r\n                        className=\"flex items-center space-x-1 text-blue-600 hover:text-blue-700 text-sm font-medium px-2 py-1 rounded hover:bg-blue-50\"\r\n                      >\r\n                        <Download className=\"w-4 h-4\" />\r\n                        <span>Descargar</span>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Entrega del Estudiante */}\r\n      {user?.role === 'student' && (\r\n        <div className=\"card\">\r\n          <h2 className=\"text-lg font-semibold text-secondary-900 mb-4\">\r\n            Mi Entrega\r\n          </h2>\r\n\r\n          {submission ? (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"p-4 bg-secondary-50 rounded-lg\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <span className=\"text-sm font-medium text-secondary-700\">\r\n                    Estado: {submission.status}\r\n                  </span>\r\n                  <span className=\"text-sm text-secondary-600\">\r\n                    Enviado: {safeFormatDate(submission.submitted_at, 'dd MMM yyyy HH:mm')}\r\n                  </span>\r\n                </div>\r\n                <div className=\"text-secondary-700 whitespace-pre-wrap\">\r\n                  {submission.content}\r\n                </div>\r\n                {submission.points_earned && (\r\n                  <div className=\"mt-3 p-3 bg-green-50 rounded-lg\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <span className=\"font-medium text-green-900\">\r\n                        Calificación: {submission.points_earned}/{assignment.max_points}\r\n                      </span>\r\n                      <span className=\"text-sm  text-green-700\">\r\n                        {((submission.points_earned / assignment.max_points) * 100).toFixed(1)}%\r\n                      </span>\r\n                    </div>\r\n                    {submission.feedback && (\r\n                      <div className=\"mt-2 text-sm text-green-800\">\r\n                        <strong>Comentarios:</strong> {submission.feedback}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {submission.status === 'draft' && (\r\n                <form onSubmit={handleSubmit}>\r\n                  <div className=\"mb-4\">\r\n                    <label className=\"block text-sm font-medium text-secondary-700 mb-2\">\r\n                      Actualizar Entrega\r\n                    </label>\r\n                    <textarea\r\n                      value={submissionContent}\r\n                      onChange={(e) => setSubmissionContent(e.target.value)}\r\n                      rows={6}\r\n                      className=\"input-field\"\r\n                      placeholder=\"Escribe tu respuesta aquí...\"\r\n                    />\r\n                  </div>\r\n                  \r\n                  {/* Subida de archivos */}\r\n                  <div className=\"mb-4\">\r\n                    <label className=\"block text-sm font-medium text-secondary-700 mb-2\">\r\n                      Archivos Adjuntos\r\n                    </label>\r\n                    <FileUpload\r\n                      submissionId={submission?.id}\r\n                      onFileUploaded={handleFileUploaded}\r\n                      onFileDeleted={handleFileDeleted}\r\n                      existingFiles={submissionFiles}\r\n                      maxFiles={5}\r\n                      maxSizeMB={10}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"flex justify-end space-x-3\">\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn-secondary\"\r\n                    >\r\n                      Guardar Borrador\r\n                    </button>\r\n                    <button\r\n                      type=\"submit\"\r\n                      disabled={submitting}\r\n                      className=\"btn-primary\"\r\n                    >\r\n                      {submitting ? 'Enviando...' : 'Enviar Entrega'}\r\n                    </button>\r\n                  </div>\r\n                </form>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"mb-4\">\r\n                <label className=\"block text-sm font-medium text-secondary-700 mb-2\">\r\n                  Tu Entrega\r\n                </label>\r\n                <textarea\r\n                  value={submissionContent}\r\n                  onChange={(e) => setSubmissionContent(e.target.value)}\r\n                  rows={6}\r\n                  className=\"input-field\"\r\n                  placeholder=\"Escribe tu respuesta aquí...\"\r\n                  required\r\n                />\r\n              </div>\r\n              \r\n              {/* Subida de archivos */}\r\n              <div className=\"mb-4\">\r\n                <label className=\"block text-sm font-medium text-secondary-700 mb-2\">\r\n                  Archivos Adjuntos\r\n                </label>\r\n                <FileUpload\r\n                  assignmentId={assignment?.id}\r\n                  onFileUploaded={handleFileUploaded}\r\n                  onFileDeleted={handleFileDeleted}\r\n                  existingFiles={submissionFiles}\r\n                  maxFiles={5}\r\n                  maxSizeMB={10}\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"flex justify-end space-x-3\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"btn-secondary\"\r\n                >\r\n                  Guardar Borrador\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={submitting}\r\n                  className=\"btn-primary\"\r\n                >\r\n                  {submitting ? 'Enviando...' : 'Enviar Entrega'}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Entregas para Profesores */}\r\n      {user?.role === 'teacher' && (\r\n        <div className=\"card\">\r\n          <h2 className=\"text-lg font-semibold text-secondary-900 mb-4\">\r\n            Entregas de Estudiantes ({submissions.length})\r\n          </h2>\r\n\r\n          <div className=\"space-y-4\">\r\n            {submissions.map((sub) => (\r\n              <div key={sub.id} className=\"p-4 bg-secondary-50 rounded-lg\">\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className=\"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center\">\r\n                      <User className=\"w-4 h-4 text-primary-600\" />\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"font-medium text-secondary-900\">\r\n                        {sub.student.first_name} {sub.student.last_name}\r\n                      </p>\r\n                      <p className=\"text-sm text-secondary-600\">\r\n                        {sub.student.email}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(sub.status)}`}>\r\n                      {sub.status}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Contenido de texto de la entrega */}\r\n                {sub.content && (\r\n                  <div className=\"mb-4\">\r\n                    <h4 className=\"text-sm font-medium text-secondary-700 mb-2 flex items-center\">\r\n                      <MessageSquare className=\"w-4 h-4 mr-2\" />\r\n                      Respuesta del estudiante:\r\n                    </h4>\r\n                    <div className=\"text-secondary-700 whitespace-pre-wrap bg-white p-3 rounded border\">\r\n                      {sub.content}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Archivos adjuntos */}\r\n                {submissionFilesMap[sub.id] && submissionFilesMap[sub.id].length > 0 && (\r\n                  <div className=\"mb-4\">\r\n                    <h4 className=\"text-sm font-medium text-secondary-700 mb-2 flex items-center\">\r\n                      <Paperclip className=\"w-4 h-4 mr-2\" />\r\n                      Archivos adjuntos ({submissionFilesMap[sub.id].length}):\r\n                    </h4>\r\n                    <div className=\"space-y-2\">\r\n                      {submissionFilesMap[sub.id].map((file) => (\r\n                        <div key={file.id} className=\"flex items-center justify-between bg-white p-3 rounded border\">\r\n                          <div className=\"flex items-center space-x-3\">\r\n                            <File className=\"w-5 h-5 text-secondary-500\" />\r\n                            <div>\r\n                              <p className=\"text-sm font-medium text-secondary-900\">\r\n                                {file.original_filename}\r\n                              </p>\r\n                              <p className=\"text-xs text-secondary-500\">\r\n                                {(file.file_size / 1024).toFixed(1)} KB\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                          <button\r\n                            onClick={() => downloadFile(file.id, file.original_filename)}\r\n                            className=\"flex items-center space-x-1 text-primary-600 hover:text-primary-700 text-sm font-medium\"\r\n                          >\r\n                            <Download className=\"w-4 h-4\" />\r\n                            <span>Descargar</span>\r\n                          </button>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"flex items-center justify-between text-sm text-secondary-600\">\r\n                  <span>\r\n                    Enviado: {safeFormatDate(sub.submitted_at, 'dd MMM yyyy HH:mm')}\r\n                  </span>\r\n                  {sub.points_earned ? (\r\n                    <span className=\"font-medium text-green-600\">\r\n                      {sub.points_earned}/{assignment.max_points} puntos\r\n                    </span>\r\n                  ) : (\r\n                    <span className=\"text-secondary-500\">Sin calificar</span>\r\n                  )}\r\n                </div>\r\n\r\n                {!sub.points_earned && (\r\n                  <div className=\"mt-3 pt-3 border-t border-secondary-200\">\r\n                    <div className=\"flex items-start space-x-3\">\r\n                      <input\r\n                        type=\"number\"\r\n                        placeholder=\"Puntos\"\r\n                        value={points}\r\n                        onChange={(e) => setPoints(e.target.value)}\r\n                        className=\"input-field w-16 text-center px-1 py-1\"\r\n                        min=\"0\"\r\n                        max={assignment.max_points}\r\n                        style={{ minWidth: '4.5rem', maxWidth: '5.5rem', height: '4rem' }}\r\n                      />\r\n                      <div className=\"flex-1 flex\">\r\n                        <textarea\r\n                          placeholder=\"Feedback (opcional)\"\r\n                          value={feedback}\r\n                          onChange={(e) => setFeedback(e.target.value)}\r\n                          className=\"input-field flex-1 min-h-[3rem] resize-y\"\r\n                          rows={2}\r\n                        />\r\n                        <button\r\n                          onClick={() => handleGrade(sub.id)}\r\n                          className=\"btn-primary whitespace-nowrap ml-3 self-end\"\r\n                        >\r\n                          <Save className=\"w-4 h-4 mr-1\" />\r\n                          Calificar\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {sub.feedback && (\r\n                  <div className=\"mt-3 p-3 bg-blue-50 rounded-lg\">\r\n                    <p className=\"text-sm text-blue-800\">\r\n                      <strong>Comentarios:</strong> {sub.feedback}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {submissions.length === 0 && (\r\n            <div className=\"text-center py-8\">\r\n              <FileText className=\"w-12 h-12 text-secondary-400 mx-auto mb-4\" />\r\n              <p className=\"text-secondary-600\">No hay entregas aún</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Comentarios */}\r\n      <div className=\"card\">\r\n        <h2 className=\"text-lg font-semibold text-secondary-900 mb-4\">\r\n          Comentarios\r\n        </h2>\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex space-x-3\">\r\n            <div className=\"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center\">\r\n              <User className=\"w-4 h-4 text-primary-600\" />\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <textarea\r\n                placeholder=\"Agregar un comentario...\"\r\n                rows={3}\r\n                className=\"input-field\"\r\n              />\r\n              <div className=\"flex justify-end mt-2\">\r\n                <button className=\"btn-primary\">\r\n                  <MessageSquare className=\"w-4 h-4 mr-2\" />\r\n                  Comentar\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal de edición */}\r\n      {user?.role === 'teacher' && assignment && (\r\n        <CreateAssignmentModal\r\n          isOpen={showEdit}\r\n          onClose={() => setShowEdit(false)}\r\n          courseId={assignment.course?.id}\r\n          assignment={{\r\n            id: assignment.id,\r\n            title: assignment.title,\r\n            description: assignment.description,\r\n            due_date: assignment.due_date,\r\n            max_points: assignment.max_points,\r\n            allow_late_submissions: assignment.allow_late_submissions\r\n          }}\r\n          onAssignmentUpdated={() => {\r\n            setShowEdit(false);\r\n            fetchAssignmentData();\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Modal del visor PDF */}\r\n      {showPdfViewer && selectedPdfFile && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg shadow-xl w-full h-full max-w-6xl max-h-[90vh] flex flex-col\">\r\n            {/* Header del modal */}\r\n            <div className=\"flex items-center justify-between p-4 border-b\">\r\n              <h3 className=\"text-lg font-semibold text-secondary-900 flex items-center\">\r\n                <FileText className=\"w-5 h-5 mr-2 text-blue-600\" />\r\n                {selectedPdfFile.original_filename || selectedPdfFile.filename}\r\n              </h3>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <button\r\n                  onClick={() => downloadFile(selectedPdfFile.id, selectedPdfFile.original_filename || selectedPdfFile.filename)}\r\n                  className=\"flex items-center space-x-1 text-blue-600 hover:text-blue-700 px-3 py-1 rounded hover:bg-blue-50\"\r\n                >\r\n                  <Download className=\"w-4 h-4\" />\r\n                  <span>Descargar</span>\r\n                </button>\r\n                <button\r\n                  onClick={closePdfViewer}\r\n                  className=\"p-2 text-secondary-500 hover:text-secondary-700 rounded hover:bg-secondary-100\"\r\n                >\r\n                  <X className=\"w-5 h-5\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Contenido del PDF */}\r\n            <div className=\"flex-1 p-4\">\r\n              {loadingPdf ? (\r\n                <div className=\"flex items-center justify-center h-full\">\r\n                  <div className=\"text-center\">\r\n                    <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\r\n                    <p className=\"text-secondary-600\">Cargando PDF...</p>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <iframe\r\n                  src={selectedPdfFile.pdfUrl}\r\n                  className=\"w-full h-full border-0 rounded\"\r\n                  title={selectedPdfFile.original_filename || selectedPdfFile.filename}\r\n                  onError={() => {\r\n                    console.error('Error al cargar PDF en iframe');\r\n                    toast.error('Error al cargar el PDF. Intenta descargarlo directamente.');\r\n                  }}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AssignmentDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}